# Проект на базе микросервисов с использованием Spring Boot и Docker

## Описание

Этот проект включает несколько микросервисов, каждый из которых представляет собой отдельный сервис с функциями для управления продуктами и заказами. Проект использует Spring Boot, Docker и PostgreSQL для реализации.

### Основные компоненты:

- **ProductService**: Управление продуктами. Сервис предоставляет API для работы с продуктами.
- **OrderService**: Управление заказами. Сервис взаимодействует с продуктами и их наличием в заказах.
- **ApiGateway**: API Gateway (или BFF — Backend For Frontend), который маршрутизирует запросы между **ProductService** и **OrderService**.
- **PostgreSQL**: База данных для хранения данных о продуктах и заказах.

## Стек технологий

- **Spring Boot 3.4** — для создания микросервисов.
- **Spring Cloud Gateway** — для маршрутизации запросов.
- **Spring Data JPA** — для работы с базой данных PostgreSQL.
- **Maven** — для сборки и управления зависимостями.
- **Docker** — для контейнеризации и управления сервисами.
- **Liquibase** — для миграции базы данных.

## Запуск

### Требования:

- Docker
- Docker Compose

### Шаги для запуска:

1. Клонируйте репозиторий проекта на вашу локальную машину:
    ```bash
    git clone https://github.com/Alex-aka-ion/dataware-demo-java.git
    cd dataware-demo-java
    ```

2. Построение Docker образов для каждого сервиса:
    - `productService`
    - `orderService`
    - `apiGateway`

   Каждый сервис будет собираться автоматически с помощью Maven через Docker Compose.

3. Запустите проект с помощью Docker Compose:
    ```bash
    docker-compose up --build
    ```

4. После запуска проект будет доступен по следующим адресам:
    - **ProductService**: `http://localhost:8081`
    - **OrderService**: `http://localhost:8082`
    - **ApiGateway**: `http://localhost:8090`

5. Swagger UI для **ProductService** и **OrderService** будет доступен через API Gateway по адресу:
    - `http://localhost:8090/swagger-ui.html`

## Структура проекта

- **`productService/`**: Микросервис для управления продуктами.
- **`orderService/`**: Микросервис для управления заказами.
- **`apiGateway/`**: API Gateway для маршрутизации запросов.
- **`postgres/`**: Контейнер для базы данных PostgreSQL.
- **`docker-compose.yml`**: Конфигурация Docker для запуска всех сервисов.

## Миграции с Liquibase

Liquibase используется для управления схемой базы данных. Файл миграций для каждого сервиса расположен в папке **`/db/changelog/`**.

### Миграция:
1. Каждый сервис использует свою собственную таблицу для хранения информации о миграциях в базе данных (например, `product_service_changelog` для **ProductService**).
2. Для применения миграций используется Liquibase, который автоматически выполняет изменения при старте сервисов.

## Важные замечания

- Все сервисы используют одну базу данных PostgreSQL.